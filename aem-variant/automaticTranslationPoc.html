<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/aem-variant/automaticTranslationPoc.md at 2024-03-01
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Composum AI &#x2013; Rethinking automatic translation in AEM with LLMs, proof of concept</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>Composum AI</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-03-01<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.8.1-SNAPSHOT<span class="divider">|</span></li>
      <li class=""><a href="../index.html" title="Composum AI Site">Composum AI Site</a><span class="divider">/</span></li>
    <li class="active ">Rethinking automatic translation in AEM with LLMs, proof of concept</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://www.ist-software.com/" class="externalLink" title="IST Gmbh Dresden">IST Gmbh Dresden</a></li>
      <li class="pull-right"><a href="http://www.composum.com/" class="externalLink" title="Composum">Composum</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../development.html" title="Development documentation"><span class="none"></span>Development documentation</a></li>
    <li><a href="https://www.composum.com/home/contact.html" class="externalLink" title="Contact Us"><span class="none"></span>Contact Us</a></li>
   <li class="nav-header">AEM-Variant</li>
    <li><a href="../aem-variant/index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="../aem-variant/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../aem-variant/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="../aem-variant/usage.html" title="Usage"><span class="none"></span>Usage</a></li>
   <li class="nav-header">Composum-Variant</li>
    <li><a href="../composum-variant/index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="../composum-variant/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../composum-variant/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="../composum-variant/usage.html" title="Usage"><span class="none"></span>Usage</a></li>
   <li class="nav-header">Parent Project</li>
    <li><a href="../../index.html" title="Composum Platform"><span class="none"></span>Composum Platform</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="../composum-ai-integration-backend/index.html" title="Composum AI::Backend"><span class="none"></span>Composum AI::Backend</a></li>
    <li><a href="../composum-ai-integration-composum/index.html" title="Composum AI::Frontend"><span class="none"></span>Composum AI::Frontend</a></li>
    <li><a href="../composum-ai/index.html" title="Composum AI::AEM"><span class="none"></span>Composum AI::AEM</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Rethinking automatic translation in AEM with LLMs, proof of concept</h1>
<p>Translating a site is often a rather large effort. Since modern LLM can both speak many languages and integrate
advanced reasoning capabilities, they can be a big help in translating a site - to the point that translating a site
can amount to an automatic process where the editor only has to check the results and only occasionally make minor
changes.</p>
<p>We integrated a proof of concept into the Composum AI that can translate individual pages or entire sites quickly.
It is very promising: a test translating the <a class="externalLink" href="https://wknd.site/us/en.html">WKND site</a> from English into German took
only about 10 minutes,
and the translation showed little need for manual corrections. Translating into other languages like Spanish, Japanese,
Chinese, Korean seem to work nicely as well, as far as we can judge by translating the text back with
<a class="externalLink" href="https://www.deepl.com/translator">Deepl Translator</a> . You are invited to try it out and let us know what you think!</p><section>
<h2><a name="Advantages_of_our_approach_using_of_LLM_for_translation"></a>Advantages of our approach using of LLM for translation</h2>
<p>While being employable for providing quick and inexpensive machine translation, LLMs like ChatGPT offer advanced
reasoning capabilities that can improve the quality of the translation:</p>
<ul>

<li>We collect the texts of one page, experience fragment or content fragment and present them together in one
translation request to ChatGPT. Thus, it can understand the context of the text and translate it accordingly.</li>
<li>By default, the LLM is instructed to be close to the original text, preserving the original style, tone, sentiment,
and formatting. But:</li>
<li>Additional instructions can be given to influence the writing style, finetuning the translation
to the desired audience, and even to give background information about the site and the translation, if needed.
That can range from minor changes like influencing how formal to address the user to major modifications like
simplifying the language for a younger audience.</li>
<li>While that's not currently implemented, we make preparations so that manual corrections of translations can be
preserved when a retranslation of a modified text in the original language is done.</li>
</ul>
<p>Or course, the full power of the <a href="usage.html">Composum AI</a> can then be used to further improve the translated texts.</p></section><section>
<h2><a name="Assumed_site_structure_and_the_translation_process"></a>Assumed site structure and the translation process</h2>
<p>Such an automatic translation process is especially useful for sites where the different language versions are very
close to each other in content and structure - mostly the language is diffent. An interesting point about the
prototype is that it currently requires that the other languages are live copies of their primary language. Thus,
changes in the master language can be rolled out to the other languages, and the automatic translation takes care of
the translation of the changed / new texts. For each translated text, the inheritance is broken so that the text can
be replaced automatically and manually edited, if needed.</p>
<p>As an example, for the WKND site the structure would look like this (just mentioning languages <code>en</code> and <code>de</code> and
countries <code>us</code> and <code>de</code> for simplicity):</p>
<ul>

<li><code>/content/wknd/language-masters/en</code> - the primary language master</li>
<li><code>/content/wknd/language-masters/de</code> is a <i><b>live copy</b></i> of the primary language master, auto-translated. This is a
difference to the normal usage of live copies, but makes it clear where the source of a translation is and rolling
out changes to the other languages is easy.</li>
<li><code>/content/wknd/us/en</code> and <code>/content/de/de</code> are the resp. country sites, live copies of the language masters. These
are mostly unmodified copies of the language master plus some country-specific content. (Of course, for
multilingual sites that do not have a country-specific structure, such country sites could be omitted.)</li>
</ul>
<p>A similar structure is used for experience fragments (<code>/content/experience-fragments/wknd/language-masters</code>) and
content fragments (<code>/content/dam/wknd</code>). These have to be translated first - the automatic translation process
also replaces links to <code>en</code> fragments with links to <code>de</code> fragments if they exist.</p>
<p>Whenever changes are introduced into the english language master, these can be rolled out to the other languages
since these are live copies. Thus, new texts would initially appear in english. A run of the automated translation
would translate these, as well as re-translate text that were changed in the english language master after the last
translation. A list of changed pages allows manually checking the translation before they can be rolled out to the
actual country sites.</p></section><section>
<h2><a name="Installation_.2F_Configuration"></a>Installation / Configuration</h2>
<p>The proof of concept is integrated into the Composum AI version &gt;= 0.8.0, but has to be enabled by OSGI
configuration. It needs at least [configuration of the API key] for Composum AI in general, as well as saving an
empty configuration &#x201c;Composum AI Autotranslate Configuration&#x201d;
(PID <code>com.composum.ai.aem.core.impl.autotranslate.AutoTranslateServiceImpl</code>)
which currently has no settings except an optional switch that can be used to disable the translation.</p></section><section>
<h2><a name="Usage_of_the_proof_of_concept_UI"></a>Usage of the proof of concept UI</h2>
<p>Since this is a proof of concept, the UI is very simple. The entry point for the translation is the URL in the author
server
<a class="externalLink" href="http://localhost:4502/apps/composum-ai/components/autotranslate/list.html">/apps/composum-ai/components/autotranslate/list.html</a>
It allows entering a path for a page or content / experience fragment or whole site and starting a translation process
for either that page only, or for that page and it's subpages.</p>
<p>Depending on the size of the site the translation can
take a couple of minutes - a list of triggered translations is provided, providing links to detail views with the
actual pages that were translated and the status / statistics of the translation. The detail view also provides a
button to cancel and undo the translation.</p>
<p>The list view also provides a form to quickly roll back the translation for a subtree for quick experimentation.
This will reenable inheritance for the translated properties and reset the translated texts to the state before the
automatic translation.</p></section><section>
<h2><a name="Current_limitations_.2F_open_points"></a>Current limitations / open points</h2>
<ul>

<li>The identification of properties that need translation is currently heuristic. Standard attributes like <code>jcr:title</code>,
<code>jcr:description</code>, <code>text</code>, <code>title</code>, <code>alt</code>, <code>cq:panelTitle</code>, <code>shortDescription</code>, <code>actionText</code>, <code>accessibilityLabel</code>,
<code>pretitle</code>, <code>displayPopupTitle</code>, <code>helpMessage</code> are translated if they contain word characters. For other properties
we check that they are not paths, contain whitespace and contain some word characters. That would exclude
nonstandard properties containing single words from translation, and might lead to some false positives. For
productive usage adding configuration for positive and negative exceptions would likely be needed.</li>
<li>At the moment the translator can only be switched off or on, but cannot be restricted to certain users or content
areas.</li>
<li>The list of performed translations is not persisted, so it is lost when the server is restarted or redeployed.</li>
</ul></section><section>
<h2><a name="Possible_extensions"></a>Possible extensions</h2><section>
<h3><a name="Differential_re-translation"></a>Differential re-translation</h3>
<p>TBD</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2024..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
