<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/autogenerated/osgiconfigurations.md at 2024-04-15
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Composum AI &#x2013; OSGi Configurations</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>Composum AI</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-04-15<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.8.4-SNAPSHOT<span class="divider">|</span></li>
      <li class=""><a href="../index.html" title="Composum AI Site">Composum AI Site</a><span class="divider">/</span></li>
    <li class="active ">OSGi Configurations</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://www.ist-software.com/" class="externalLink" title="IST Gmbh Dresden">IST Gmbh Dresden</a></li>
      <li class="pull-right"><a href="http://www.composum.com/" class="externalLink" title="Composum">Composum</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../development.html" title="Development documentation"><span class="none"></span>Development documentation</a></li>
    <li><a href="https://www.composum.com/home/contact.html" class="externalLink" title="Contact Us"><span class="none"></span>Contact Us</a></li>
   <li class="nav-header">AEM-Variant</li>
    <li><a href="../aem-variant/index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="../aem-variant/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../aem-variant/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="../aem-variant/usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="../aem-variant/automaticTranslation.html" title="Automatic Translation"><span class="none"></span>Automatic Translation</a></li>
   <li class="nav-header">Composum-Variant</li>
    <li><a href="../composum-variant/index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="../composum-variant/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../composum-variant/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="../composum-variant/usage.html" title="Usage"><span class="none"></span>Usage</a></li>
   <li class="nav-header">References / Lists</li>
    <li class="active"><a href="#"><span class="none"></span>OSGI Configurations</a></li>
    <li><a href="../autogenerated/slingcaconfigurations.html" title="Sling CA Configurations"><span class="none"></span>Sling CA Configurations</a></li>
   <li class="nav-header">Parent Project</li>
    <li><a href="../../index.html" title="Composum Platform"><span class="none"></span>Composum Platform</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="../composum-ai-integration-backend/index.html" title="Composum AI::Backend"><span class="none"></span>Composum AI::Backend</a></li>
    <li><a href="../composum-ai-integration-composum/index.html" title="Composum AI::Frontend"><span class="none"></span>Composum AI::Frontend</a></li>
    <li><a href="../composum-ai/index.html" title="Composum AI::AEM"><span class="none"></span>Composum AI::AEM</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>OSGi Configurations</h1>
<p>This is an automatically generated overview.</p>
<p><a name="osgi.ApproximateMarkdownServiceImpl"></a></p><section>
<h2><a name="Composum_AI_Approximate_Markdown_Service_Configuration_.28slingbase.29"></a>Composum AI Approximate Markdown Service Configuration (slingbase)</h2>
<p>Configuration for the Approximate Markdown Service used to get a text representation of a page or component for use with the AI.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">1</td>
<td>Text Attributes</td>
<td>String[]</td>
<td> </td>
<td>List of attributes that are treated as text and converted to markdown. If not present, no attributes are treated as text.</td></tr>
<tr class="a">
<td align="left">2</td>
<td>Labeled Attribute Pattern Allow</td>
<td>String[]</td>
<td> </td>
<td>Regular expressions for attributes that are output with a label. If not present, none will be output except the text attributes.</td></tr>
<tr class="b">
<td align="left">3</td>
<td>Labeled Attribute Pattern Deny</td>
<td>String[]</td>
<td> </td>
<td>Regular expressions for attributes that are not output with a label. Takes precedence over the corresponding allow regexp list.</td></tr>
<tr class="a">
<td align="left">4</td>
<td>Labelled Attribute Order</td>
<td>String[]</td>
<td> </td>
<td>List of labelled attributes that come first if they are present, in the given order.</td></tr>
</tbody>
</table>
<p><a name="osgi.AutoTranslateConfig"></a></p></section><section>
<h2><a name="Composum_AI_Autotranslate_Configuration_.28aem-core.29"></a>Composum AI Autotranslate Configuration (aem-core)</h2>
<p>Configuration of the automatic translation of AEM pages. The OSGI configuration is only used if no Sling CAConfig configuration is found. Proof of concept quality - give it a try. :-)</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">pocUiEnabled</td>
<td>Proof of concept UI</td>
<td>boolean</td>
<td>false</td>
<td>Enable the Autotranslate proof of concept UI at /apps/composum-ai/components/autotranslate/list/list.html , normally disabled. Only read from OSGI configuration.</td></tr>
<tr class="a">
<td align="left">disabled</td>
<td>Disable the Autotranslate service</td>
<td>boolean</td>
<td>false</td>
<td> </td></tr>
<tr class="b">
<td align="left">deniedResourceTypes</td>
<td>Denied Resource Types</td>
<td>String[]</td>
<td> </td>
<td>Regexes for denied Resource Types - if the sling:resourceType matches that, then no attributes or child nodes are touched by the automatic translation.</td></tr>
<tr class="a">
<td align="left">allowedAttributeRegexes</td>
<td>Allowed Additional Attributes</td>
<td>String[]</td>
<td> </td>
<td>Matches for Attributes that are explicitly allowed to be translated, in addition to standard attributes and heuristically recognized attributes. The heuristics is that the value has to have letters and whitespaces. Syntax: regular expressions that match resource type % attribute name - e.g. myapp/component/html%markup</td></tr>
<tr class="b">
<td align="left">deniedAttributesRegexes</td>
<td>Denied Attributes</td>
<td>String[]</td>
<td> </td>
<td>Attributes that are explicitly denied to be translated. Can be used to override the heuristics / standard attributes. Same syntax as allowed attributes.</td></tr>
<tr class="a">
<td align="left">ignoreAssetsExceptContentFragments</td>
<td>Ignore Assets except Content Fragments</td>
<td>boolean</td>
<td>true</td>
<td>If true, assets are ignored for translation, except for content fragments. (Otherwise the translator would translate metadata of images and videos.)</td></tr>
</tbody>
</table>
<p><a name="osgi.GPTChatCompletionServiceImpl"></a></p></section><section>
<h2><a name="Composum_AI_OpenAI_Configuration_.28backend-base.29"></a>Composum AI OpenAI Configuration (backend-base)</h2>
<p>Provides rather low level access to the GPT chat completion - use the other services for more specific services.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">disabled</td>
<td>Disable</td>
<td>boolean</td>
<td>false</td>
<td>Disable the GPT Chat Completion Service</td></tr>
<tr class="a">
<td align="left">chatCompletionUrl</td>
<td>URL of the chat completion service</td>
<td>String</td>
<td> </td>
<td>Optional, if not OpenAI's default <a class="externalLink" href="https://api.openai.com/v1/chat/completions">https://api.openai.com/v1/chat/completions</a></td></tr>
<tr class="b">
<td align="left">openAiApiKey</td>
<td>OpenAI API key</td>
<td>String</td>
<td> </td>
<td>OpenAI API key from <a class="externalLink" href="https://platform.openai.com/">https://platform.openai.com/</a>. If not given, we check the key file, the environment Variable OPENAI_API_KEY, and the system property openai.api.key .</td></tr>
<tr class="a">
<td align="left">openAiOrganizationId</td>
<td>OpenAI Organization ID</td>
<td>String</td>
<td> </td>
<td>Optionally, OpenAI Organization ID from <a class="externalLink" href="https://platform.openai.com/account/organization">https://platform.openai.com/account/organization</a> .</td></tr>
<tr class="b">
<td align="left">openAiApiKeyFile</td>
<td>OpenAI API key file</td>
<td>String</td>
<td> </td>
<td>Key File containing the API key, as an alternative to Open AKI Key configuration and the variants described there.</td></tr>
<tr class="a">
<td align="left">defaultModel</td>
<td>Default model</td>
<td>String</td>
<td>gpt-3.5-turbo</td>
<td>Default model to use for the chat completion. The default if not set is gpt-3.5-turbo. Please consider the varying prices <a class="externalLink" href="https://openai.com/pricing">https://openai.com/pricing</a> .</td></tr>
<tr class="b">
<td align="left">imageModel</td>
<td>Vision model</td>
<td>String</td>
<td>gpt-4-turbo</td>
<td>Optional, a model that is used if an image is given as input, e.g. gpt-4-turbo. If not given, image recognition is rejected.</td></tr>
<tr class="a">
<td align="left">temperature</td>
<td>Temperature</td>
<td>String</td>
<td> </td>
<td>Optional temperature setting that determines variability and creativity as a floating point between 0.0 and 1.0</td></tr>
<tr class="b">
<td align="left">maximumTokensPerRequest</td>
<td>Maximum Tokens per Request</td>
<td>int</td>
<td>50000</td>
<td>If &gt; 0 limit to the maximum number of tokens per request. That's about a twice the word count. Caution: Compare with the pricing - on GPT-4 models a thousand tokens might cost $0.01 or more.</td></tr>
<tr class="a">
<td align="left">maximumTokensPerResponse</td>
<td>Maximum output tokens per request</td>
<td>int</td>
<td>4096</td>
<td>Maximum number of tokens to return in the response. Must not exceed the capabilities of the model - as of 10/03/24 this is 4096 for most OpenAI models - which is the default, so no need to set that.</td></tr>
<tr class="b">
<td align="left">connectionTimeout</td>
<td>Connection timeout in seconds</td>
<td>int</td>
<td>20</td>
<td>Default 20</td></tr>
<tr class="a">
<td align="left">requestTimeout</td>
<td>Request timeout in seconds</td>
<td>int</td>
<td>120</td>
<td>Default 120</td></tr>
<tr class="b">
<td align="left">requestsPerMinute</td>
<td>Maximum requests per minute</td>
<td>int</td>
<td>100</td>
<td>Maximum count of requests to ChatGPT per minute - from the second half there will be a slowdown to avoid hitting the limit. Default 100</td></tr>
<tr class="a">
<td align="left">requestsPerHour</td>
<td>Maximum requests per hour</td>
<td>int</td>
<td>1000</td>
<td>Maximum count of requests to ChatGPT per hour - from the second half there will be a slowdown to avoid hitting the limit. Default 1000</td></tr>
<tr class="b">
<td align="left">requestsPerDay</td>
<td>Maximum requests per day</td>
<td>int</td>
<td>3000</td>
<td>Maximum count of requests to ChatGPT per day - from the second half there will be a slowdown to avoid hitting the limit. Default 3000</td></tr>
</tbody>
</table>
<p><a name="osgi.GPTPermissionConfiguration"></a></p></section><section>
<h2><a name="Composum_AI_Permission_Configuration_.28slingbase.29"></a>Composum AI Permission Configuration (slingbase)</h2>
<p>A configuration for allowed AI services. There can be multiple configurations, and the allowed services are aggregated.
There is a fallback configuration that is used if no other configuration is found, and a factory for multiple configurations which override the fallback configuration if present.
If configured, Sling Context Aware Configuration takes precedence over OSGI configuration.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>ID</th>
<th>Name</th>
<th>Type</th>
<th>Default Value</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">10</td>
<td>Services</td>
<td>String[]</td>
<td>[CATEGORIZE, CREATE, SIDEPANEL, TRANSLATE]</td>
<td>List of services to which this configuration applies. Possible values are: CATEGORIZE, CREATE, SIDEPANEL, TRANSLATE. For AEM only create and sidepanel are supported.</td></tr>
<tr class="a">
<td align="left">20</td>
<td>Allowed Users</td>
<td>String[]</td>
<td>[.*]</td>
<td>Regular expressions for allowed users or user groups. If not present, no user is allowed from this configuration.</td></tr>
<tr class="b">
<td align="left">30</td>
<td>Denied Users</td>
<td>String[]</td>
<td> </td>
<td>Regular expressions for denied users or user groups. Takes precedence over allowed users.</td></tr>
<tr class="a">
<td align="left">40</td>
<td>Allowed Paths</td>
<td>String[]</td>
<td>[/content/.*]</td>
<td>Regular expressions for allowed content paths. If not present, no paths are allowed.</td></tr>
<tr class="b">
<td align="left">50</td>
<td>Denied Paths</td>
<td>String[]</td>
<td>[/content/dam/.*]</td>
<td>Regular expressions for denied content paths. Takes precedence over allowed paths. Content fragments are not allowed by default since there has been trouble in the UI.</td></tr>
<tr class="a">
<td align="left">60</td>
<td>Allowed Views</td>
<td>String[]</td>
<td>[.*]</td>
<td>Regular expressions for allowed views - that is, for URLs like /editor.html/.<i>. If not present, no views are allowed. Use .</i> to allow all views.</td></tr>
<tr class="b">
<td align="left">70</td>
<td>Denied Views</td>
<td>String[]</td>
<td> </td>
<td>Regular expressions for denied views. Takes precedence over allowed views.</td></tr>
<tr class="a">
<td align="left">80</td>
<td>Allowed Components</td>
<td>String[]</td>
<td>[.*]</td>
<td>Regular expressions for allowed resource types of components. If not present, no components are allowed.</td></tr>
<tr class="b">
<td align="left">90</td>
<td>Denied Components</td>
<td>String[]</td>
<td> </td>
<td>Regular expressions for denied resource types of components. Takes precedence over allowed components.</td></tr>
<tr class="a">
<td align="left">100</td>
<td>Allowed Page Templates</td>
<td>String[]</td>
<td>[.*]</td>
<td>Regular expressions for allowed page templates. If not present, all page templates are allowed.</td></tr>
<tr class="b">
<td align="left">110</td>
<td>Denied Page Templates</td>
<td>String[]</td>
<td> </td>
<td>Regular expressions for denied page templates. Takes precedence over allowed page templates.</td></tr>
</tbody>
</table>
<p><a name="osgi.GPTPromptLibrary"></a></p></section><section>
<h2><a name="Composum_AI_Prompt_Library_Configuration_.28slingbase.29"></a>Composum AI Prompt Library Configuration (slingbase)</h2>
<p>Location for the prompt library for Composum AI. There can be multiple configurations, and the allowed services are aggregated.
There is a fallback configuration that is used if no other configuration is found, and a factory for multiple configurations which override the fallback configuration if present.
If configured, Sling Context Aware Configuration takes precedence over OSGI configuration.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">contentCreationPromptsPath</td>
<td>Content Creation Prompts Path</td>
<td>String</td>
<td> </td>
<td>Path to the content creation prompts. Either a JSON file, or a page.</td></tr>
<tr class="a">
<td align="left">sidePanelPromptsPath</td>
<td>Side Panel Prompts Path</td>
<td>String</td>
<td> </td>
<td>Path to the side panel prompts. Either a JSON file, or a page.</td></tr>
</tbody>
</table>
<p><a name="osgi.GPTTranslationServiceImpl"></a></p></section><section>
<h2><a name="Composum_AI_Translation_Service_Configuration_.28backend.29"></a>Composum AI Translation Service Configuration (backend)</h2>
<p>Configuration for the basic Composum AI Translation Service</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">disabled</td>
<td>Disable the translation service</td>
<td>boolean</td>
<td>false</td>
<td>Disable the translation service</td></tr>
<tr class="a">
<td align="left">fakeTranslation</td>
<td>Fake translation</td>
<td>boolean</td>
<td>false</td>
<td>For quick and inexpensive testing, when you just want to check that the translation does something for e.g. a bulk of texts, you can enable this. The &#x201c;translation&#x201d; then just turns the text iNtO tHiS cApItAlIsAtIoN. Easy to spot, but probably doesn't destroy the content completely.</td></tr>
<tr class="b">
<td align="left">diskCache</td>
<td>Disk cache</td>
<td>String</td>
<td>&quot;&quot;</td>
<td>Path to a directory where to cache the translations. If empty, no caching is done. If the path is relative, it is relative to the current working directory. If the path is absolute, it is used as is.</td></tr>
</tbody>
</table>
<p><a name="osgi.HtmlToApproximateMarkdownServicePlugin"></a></p></section><section>
<h2><a name="Composum_AI_Html_To_Approximate_Markdown_Service_Plugin_.28slingbase.29"></a>Composum AI Html To Approximate Markdown Service Plugin (slingbase)</h2>
<p>A plugin for the ApproximateMarkdownService that transforms the rendered HTML of components to markdown, which can work better than trying to guess the text content from the JCR representation (as is the default) but probably doesn't work for all components. So it can be enabled for some sling resource types by regex. We will not use this for the first two levels below the page, as that could include unwanted stuff like headers and footers.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">Allowed resource types</td>
<td>allowedResourceTypes</td>
<td>String[]</td>
<td>{&#x201c;.*&#x201d;}</td>
<td>Regular expressions for allowed resource types. If not present, no resource types are allowed.</td></tr>
<tr class="a">
<td align="left">Denied resource types</td>
<td>deniedResourceTypes</td>
<td>String[]</td>
<td>{}</td>
<td>Regular expressions for denied resource types. Takes precedence over allowed resource types.</td></tr>
</tbody>
</table>
<p><a name="osgi.SlingCaConfigPluginImpl"></a></p></section><section>
<h2><a name="Composum_AI_SlingCaConfig_Plugin_.28slingbase.29"></a>Composum AI SlingCaConfig Plugin (slingbase)</h2>
<p>Allows enabling / disabling the Sling Context Aware Configuration of the Composum AI.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>id</th>
<th>name</th>
<th>type</th>
<th>default value</th>
<th>description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">1</td>
<td>Enabled</td>
<td>Boolean</td>
<td>true</td>
<td>Whether the Sling Context Aware Configuration of the Composum AI is enabled.</td></tr>
</tbody>
</table></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2024..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
