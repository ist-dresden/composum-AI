<jcr:root jcr:primaryType="nt:unstructured" sling:resourceType="cq/gui/components/authoring/dialog"
          xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
          helpPath="/conf/composum-ai/settings/dialogs/contentcreation/help.html"
          extraClientlibs="[]"
          jcr:title="Composum AI Content Creation"
          height="90%"
          width="90%"
          suppressFormUiBehavior="{Boolean}true"
          mode="edit">
    <content jcr:primaryType="nt:unstructured" sling:resourceType="granite/ui/components/coral/foundation/container"
             granite:class="composum-ai-dialog">
        <items jcr:primaryType="nt:unstructured" sling:resourceType="nt:unstructured">
            <promptColumns
                    jcr:primaryType="nt:unstructured"
                    maximized="{Boolean}true"
                    granite:class="composum-ai-prompt-columns"
                    sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                <items jcr:primaryType="nt:unstructured">
                    <container
                            jcr:primaryType="nt:unstructured"
                            granite:class="composum-ai-prompt-column"
                            sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <promptFieldset
                                    jcr:primaryType="nt:unstructured"
                                    jcr:title="Prompt"
                                    sling:resourceType="granite/ui/components/coral/foundation/form/fieldset">
                                <items jcr:primaryType="nt:unstructured">
                                    <predefinedPrompts jcr:primaryType="nt:unstructured"
                                                       sling:resourceType="granite/ui/components/coral/foundation/form/select"
                                                       fieldLabel="Overwrite Input Prompt with Predefined Prompt"
                                                       fieldDescription="This replaces the prompt (that is, the instructions to be executed by the AI) by one of a number of predefined prompts you can use directly or modify to create your own prompt."
                                                       size="10"
                                                       name="./predefinedPrompts"
                                                       granite:class="composum-ai-predefined-prompts">
                                        <datasource
                                                jcr:primaryType="nt:unstructured"
                                                sling:resourceType="composum-ai/servlets/contentcreationprompts"/>
                                    </predefinedPrompts>
                                    <promptArea jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/form/textarea"
                                                fieldLabel="Input Prompt (Instructions)"
                                                fieldDescription="The instructions to the AI that will be applied to the source text. If you like some examples you can select one of the predefined prompts - that will replace the content of this field."
                                                name="./promptArea" rows="10"
                                                granite:class="composum-ai-prompt-textarea">
                                    </promptArea>
                                </items>
                            </promptFieldset>
                        </items>
                    </container>
                    <container2
                            jcr:primaryType="nt:unstructured"
                            granite:class="composum-ai-source-column"
                            sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <sourceFieldset
                                    jcr:primaryType="nt:unstructured"
                                    jcr:title="Source"
                                    sling:resourceType="granite/ui/components/coral/foundation/form/fieldset">
                                <items jcr:primaryType="nt:unstructured">
                                    <contentSelector jcr:primaryType="nt:unstructured"
                                                     sling:resourceType="granite/ui/components/coral/foundation/form/select"
                                                     fieldLabel="Overwrite Source Content with the text from ..."
                                                     fieldDescription="Select which text the AI receives in addition to your prompt, if any. This can serve basically as data for your request to generate new text or modify this given text, if your prompt requires that."
                                                     name="./contentSelector"
                                                     granite:class="composum-ai-content-selector">
                                        <datasource
                                                jcr:primaryType="nt:unstructured"
                                                sling:resourceType="composum-ai/servlets/contentcreationselectors"/>
                                    </contentSelector>
                                    <url
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                            fieldLabel="URL for source text"
                                            fieldDescription="Enter an URL from which to grab the source text."
                                            granite:class="composum-ai-url-field"
                                            name="./sourceurl"/>
                                    <sourcePlaintext
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textarea"
                                            fieldDescription="The base text that is modified according to the prompt. Will be overwritten when the Content Selector is changed."
                                            fieldLabel="Source Content ('Data' for the instructions)" rows="10"
                                            name="./sourcePlaintext"
                                            granite:class="composum-ai-source-plaintext composum-ai-source-container">
                                        <granite:rendercondition
                                                jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/renderconditions/simple"
                                                expression="${param.richtext != 'true'}">
                                        </granite:rendercondition>
                                    </sourcePlaintext>
                                    <container
                                            jcr:primaryType="nt:unstructured"
                                            granite:class="composum-ai-source-richtext composum-ai-source-container"
                                            sling:resourceType="granite/ui/components/coral/foundation/container">
                                        <items jcr:primaryType="nt:unstructured">
                                            <sourceRichtext
                                                    jcr:primaryType="nt:unstructured"
                                                    sling:resourceType="cq/gui/components/authoring/dialog/richtext"
                                                    fieldLabel="Source Content ('Data' for the instructions)"
                                                    fieldDescription="The base text that is modified according to the prompt. Will be overwritten when the Content Selector is changed."
                                                    name="./sourceText"
                                                    useFixedInlineToolbar="{Boolean}true">
                                                <granite:rendercondition
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/simple"
                                                        expression="${param.richtext != 'false'}">
                                                </granite:rendercondition>
                                                <rtePlugins
                                                        jcr:primaryType="nt:unstructured">
                                                    <format
                                                            jcr:primaryType="nt:unstructured"
                                                            features="bold,italic"/>
                                                    <justify
                                                            jcr:primaryType="nt:unstructured"
                                                            features="-"/>
                                                    <links
                                                            jcr:primaryType="nt:unstructured"
                                                            features="modifylink,unlink"/>
                                                    <lists
                                                            jcr:primaryType="nt:unstructured"
                                                            features="*"/>
                                                    <misctools
                                                            jcr:primaryType="nt:unstructured">
                                                        <specialCharsConfig
                                                                jcr:primaryType="nt:unstructured">
                                                            <chars
                                                                    jcr:primaryType="nt:unstructured">
                                                                <default_copyright
                                                                        jcr:primaryType="nt:unstructured"
                                                                        entity="&amp;copy;"
                                                                        name="copyright"/>
                                                                <default_euro
                                                                        jcr:primaryType="nt:unstructured"
                                                                        entity="&amp;euro;"
                                                                        name="euro"/>
                                                                <default_registered
                                                                        jcr:primaryType="nt:unstructured"
                                                                        entity="&amp;reg;"
                                                                        name="registered"/>
                                                                <default_trademark
                                                                        jcr:primaryType="nt:unstructured"
                                                                        entity="&amp;trade;"
                                                                        name="trademark"/>
                                                            </chars>
                                                        </specialCharsConfig>
                                                    </misctools>
                                                    <paraformat
                                                            jcr:primaryType="nt:unstructured"
                                                            features="*">
                                                        <formats
                                                                jcr:primaryType="nt:unstructured">
                                                            <default_p
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Paragraph"
                                                                    tag="p"/>
                                                            <default_h1
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Heading 1"
                                                                    tag="h1"/>
                                                            <default_h2
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Heading 2"
                                                                    tag="h2"/>
                                                            <default_h3
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Heading 3"
                                                                    tag="h3"/>
                                                            <default_h4
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Heading 4"
                                                                    tag="h4"/>
                                                            <default_h5
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Heading 5"
                                                                    tag="h5"/>
                                                            <default_h6
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Heading 6"
                                                                    tag="h6"/>
                                                            <default_blockquote
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Quote"
                                                                    tag="blockquote"/>
                                                            <default_pre
                                                                    jcr:primaryType="nt:unstructured"
                                                                    description="Preformatted"
                                                                    tag="pre"/>
                                                        </formats>
                                                    </paraformat>
                                                    <table
                                                            jcr:primaryType="nt:unstructured"
                                                            features="-">
                                                    </table>
                                                    <tracklinks
                                                            jcr:primaryType="nt:unstructured"
                                                            features="*"/>
                                                </rtePlugins>
                                                <uiSettings
                                                        jcr:primaryType="nt:unstructured">
                                                    <cui
                                                            jcr:primaryType="nt:unstructured">
                                                        <inline
                                                                jcr:primaryType="nt:unstructured"
                                                                toolbar="[format#bold,format#italic,format#underline,#justify,#lists,links#modifylink,links#unlink,#paraformat]">
                                                            <popovers
                                                                    jcr:primaryType="nt:unstructured">
                                                                <justify
                                                                        jcr:primaryType="nt:unstructured"
                                                                        items="[justify#justifyleft,justify#justifycenter,justify#justifyright]"
                                                                        ref="justify"/>
                                                                <lists
                                                                        jcr:primaryType="nt:unstructured"
                                                                        items="[lists#unordered,lists#ordered,lists#outdent,lists#indent]"
                                                                        ref="lists"/>
                                                                <paraformat
                                                                        jcr:primaryType="nt:unstructured"
                                                                        items="paraformat:getFormats:paraformat-pulldown"
                                                                        ref="paraformat"/>
                                                            </popovers>
                                                        </inline>
                                                    </cui>
                                                </uiSettings>
                                            </sourceRichtext>
                                        </items>
                                    </container>
                                    <image-container
                                            jcr:primaryType="nt:unstructured"
                                            granite:class="composum-ai-source-image-container hidden"
                                            sling:resourceType="granite/ui/components/coral/foundation/container">
                                        <items jcr:primaryType="nt:unstructured">
                                            <imagediv
                                                    jcr:primaryType="nt:unstructured"
                                                    sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                                    fieldDescription="An image that will be used to inform the AI."
                                                    fieldLabel="Source Content ('Data' for the instructions)" rows="10"
                                                    name="./sourceImage"
                                                    granite:class="composum-ai-source-image">
                                            </imagediv>
                                        </items>
                                    </image-container>
                                </items>
                            </sourceFieldset>
                        </items>
                    </container2>
                </items>
            </promptColumns>

            <generateButtonFieldset
                    jcr:primaryType="nt:unstructured"
                    jcr:title=""
                    sling:resourceType="granite/ui/components/coral/foundation/form/fieldset">
                <items jcr:primaryType="nt:unstructured">
                    <generateActionbar
                            jcr:primaryType="nt:unstructured"
                            margin="{Boolean}false"
                            granite:class="composum-ai-actionbar"
                            sling:resourceType="granite/ui/components/coral/foundation/actionbar">
                        <primary
                                jcr:primaryType="nt:unstructured">
                            <generate
                                    jcr:primaryType="nt:unstructured" icon="play"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    granite:title="Triggers the content generation according to the instructions and the source text. Please give that a couple of seconds."
                                    text="Generate" granite:class="composum-ai-generate-button"/>
                            <stop
                                    jcr:primaryType="nt:unstructured" icon="stop"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    granite:title="Aborts the content generation."
                                    text="Stop" granite:class="composum-ai-stop-button"/>
                            <reset
                                    jcr:primaryType="nt:unstructured" icon="delete"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    granite:class="composum-ai-reset-button"
                                    granite:title="Resets the form to the state when you opened it."
                                    text="Reset"/>
                            <textlengthLabel
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/foundation/text"
                                    granite:class="_coral-Tool"
                                    text="Text Length"/>
                            <textLengthSelector jcr:primaryType="nt:unstructured"
                                                sling:resourceType="granite/ui/components/coral/foundation/form/select"
                                                fieldDescription="The desired approximate length of the generated text."
                                                name="./textLengthSelector"
                                                granite:class="composum-ai-text-length-selector _coral-Tool">
                                <datasource
                                        jcr:primaryType="nt:unstructured"
                                        sling:resourceType="cq/gui/components/common/wcm/datasources/childresources"
                                        path="/conf/composum-ai/settings/dialogs/contentcreation/textlengths"/>
                            </textLengthSelector>
                            <loading
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/container"
                                    granite:class="coral-Wait coral-Wait--large composum-ai-loading"/>
                        </primary>
                        <secondary
                                jcr:primaryType="nt:unstructured">
                            <resetHistory
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    class="composum-ai-reset-history" icon="deleteOutline"
                                    granite:title="Resets this form including the whole history."
                                    text="Reset History" granite:class="composum-ai-reset-history-button"/>
                            <back
                                    jcr:primaryType="nt:unstructured" icon="back"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    class="composum-ai-back"
                                    granite:title="You can make multiple tries to generate content and switch back and forth in a history of the dialog settings and the AI generated texts."
                                    text="Back" granite:class="composum-ai-back-button"/>
                            <forward
                                    jcr:primaryType="nt:unstructured" icon="forward"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    class="composum-ai-forward"
                                    granite:title="You can make multiple tries to generate content and switch back and forth in a history of the dialog settings and the AI generated texts."
                                    text="Forward" granite:class="composum-ai-forward-button"/>
                        </secondary>
                    </generateActionbar>
                </items>
            </generateButtonFieldset>

            <errorColumns
                    jcr:primaryType="nt:unstructured"
                    granite:class="composum-ai-error-columns"
                    sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                <items jcr:primaryType="nt:unstructured">
                    <alert
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/coral/foundation/alert"
                            granite:class="composum-ai-alert"
                            variant="error"
                            text="Your error message here."/>
                </items>
            </errorColumns>

            <contentSuggestion
                    jcr:primaryType="nt:unstructured"
                    jcr:title="Content Suggestion" granite:class="composum-ai-content-suggestion"
                    sling:resourceType="granite/ui/components/coral/foundation/form/fieldset">
                <items jcr:primaryType="nt:unstructured">
                    <responsePlaintext
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/foundation/form/textarea"
                            fieldLabel=""
                            name="./responsePlaintext" granite:class="composum-ai-response-plaintext">
                        <granite:rendercondition
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/renderconditions/simple"
                                expression="${param.richtext != 'true'}">
                        </granite:rendercondition>
                    </responsePlaintext>
                    <container
                            jcr:primaryType="nt:unstructured"
                            granite:class="composum-ai-response-richtext"
                            sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <responseRichtext
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="cq/gui/components/authoring/dialog/richtext"
                                    fieldLabel=""
                                    name="./responseRichtext"
                                    useFixedInlineToolbar="{Boolean}true">
                                <granite:rendercondition
                                        jcr:primaryType="nt:unstructured"
                                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/simple"
                                        expression="${param.richtext != 'false'}">
                                </granite:rendercondition>
                                <rtePlugins
                                        jcr:primaryType="nt:unstructured">
                                    <format
                                            jcr:primaryType="nt:unstructured"
                                            features="bold,italic"/>
                                    <justify
                                            jcr:primaryType="nt:unstructured"
                                            features="-"/>
                                    <links
                                            jcr:primaryType="nt:unstructured"
                                            features="modifylink,unlink"/>
                                    <lists
                                            jcr:primaryType="nt:unstructured"
                                            features="*"/>
                                    <misctools
                                            jcr:primaryType="nt:unstructured">
                                        <specialCharsConfig
                                                jcr:primaryType="nt:unstructured">
                                            <chars
                                                    jcr:primaryType="nt:unstructured">
                                                <default_copyright
                                                        jcr:primaryType="nt:unstructured"
                                                        entity="&amp;copy;"
                                                        name="copyright"/>
                                                <default_euro
                                                        jcr:primaryType="nt:unstructured"
                                                        entity="&amp;euro;"
                                                        name="euro"/>
                                                <default_registered
                                                        jcr:primaryType="nt:unstructured"
                                                        entity="&amp;reg;"
                                                        name="registered"/>
                                                <default_trademark
                                                        jcr:primaryType="nt:unstructured"
                                                        entity="&amp;trade;"
                                                        name="trademark"/>
                                            </chars>
                                        </specialCharsConfig>
                                    </misctools>
                                    <paraformat
                                            jcr:primaryType="nt:unstructured"
                                            features="*">
                                        <formats
                                                jcr:primaryType="nt:unstructured">
                                            <default_p
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Paragraph"
                                                    tag="p"/>
                                            <default_h1
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Heading 1"
                                                    tag="h1"/>
                                            <default_h2
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Heading 2"
                                                    tag="h2"/>
                                            <default_h3
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Heading 3"
                                                    tag="h3"/>
                                            <default_h4
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Heading 4"
                                                    tag="h4"/>
                                            <default_h5
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Heading 5"
                                                    tag="h5"/>
                                            <default_h6
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Heading 6"
                                                    tag="h6"/>
                                            <default_blockquote
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Quote"
                                                    tag="blockquote"/>
                                            <default_pre
                                                    jcr:primaryType="nt:unstructured"
                                                    description="Preformatted"
                                                    tag="pre"/>
                                        </formats>
                                    </paraformat>
                                    <table
                                            jcr:primaryType="nt:unstructured"
                                            features="-">
                                    </table>
                                    <tracklinks
                                            jcr:primaryType="nt:unstructured"
                                            features="*"/>
                                </rtePlugins>
                                <uiSettings
                                        jcr:primaryType="nt:unstructured">
                                    <cui
                                            jcr:primaryType="nt:unstructured">
                                        <inline
                                                jcr:primaryType="nt:unstructured"
                                                toolbar="[format#bold,format#italic,format#underline,#justify,#lists,links#modifylink,links#unlink,#paraformat]">
                                            <popovers
                                                    jcr:primaryType="nt:unstructured">
                                                <justify
                                                        jcr:primaryType="nt:unstructured"
                                                        items="[justify#justifyleft,justify#justifycenter,justify#justifyright]"
                                                        ref="justify"/>
                                                <lists
                                                        jcr:primaryType="nt:unstructured"
                                                        items="[lists#unordered,lists#ordered,lists#outdent,lists#indent]"
                                                        ref="lists"/>
                                                <paraformat
                                                        jcr:primaryType="nt:unstructured"
                                                        items="paraformat:getFormats:paraformat-pulldown"
                                                        ref="paraformat"/>
                                            </popovers>
                                        </inline>
                                    </cui>
                                </uiSettings>
                            </responseRichtext>
                        </items>
                    </container>

                    <!-- <saveActionbar
                            jcr:primaryType="nt:unstructured"
                            margin="{Boolean}false"
                            sling:resourceType="granite/ui/components/coral/foundation/actionbar">
                        <primary
                                jcr:primaryType="nt:unstructured">
                            <cancel
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    granite:class="composum-ai-cancel-button"
                                    text="Cancel"/>
                            <append jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/button"
                                    granite:class="composum-ai-append-button"
                                    fieldDescription="Append the created text to the editor of the component property you were editing when you opened this dialog."
                                    text="Append"/>
                            <replace jcr:primaryType="nt:unstructured"
                                     sling:resourceType="granite/ui/components/coral/foundation/button"
                                     granite:class="composum-ai-replace-button"
                                     fieldDescription="Replace the content of the editor of the component property you were editing when you opened this dialog with the created text."
                                     text="Replace"/>
                        </primary>
                    </saveActionbar> -->
                </items>
            </contentSuggestion>
        </items>
    </content>
</jcr:root>
