<!-- AIGenPromptStart(foobar)

Generate a HTML page "Create a page from a template with AI" that contains a form calling the AITemplatingServlet appropriately
at its path (no context path).

You can use bootstrap and jquery. Make it pleasantly colorful with pastel colors, blueish.
Include a three sentence description what the application does, and a one sentence description on each field.
The page is deployed on the same host as the servlet.

It should include a form that contains the parameters for the AITemplatingServlet. Only one additionalUrls parameter is needed.
There should be buttons for each of the methods (enum Method) defined in the servlet.

Display the result of the execution in a div below the form.
Disable the buttons while the request is running.

On each submit the values of the fields should be stored in localStorage at key composum-ai-prototype-templating ,
and on first loading of the page the last values should be restored from there.

AIGenCommand(foobar)
templating.html
../../../../../../../../../../../../../backend/slingbase/src/main/java/com/composum/ai/backend/slingbase/experimential/AITemplatingService.java
../../../../../../../../../../../../../backend/slingbase/src/main/java/com/composum/ai/backend/slingbase/experimential/AITemplatingServlet.java
AIGenPromptEnd(foobar) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a page from a template with AI</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #e6f2ff;
        }
        .container {
            background-color: #d1e7ff;
            padding: 20px;
            border-radius: 10px;
        }
        .btn-primary {
            background-color: #7fc1ff;
            border-color: #7fc1ff;
        }
        .btn-primary:hover {
            background-color: #5eadff;
            border-color: #5eadff;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1>Create a page from a template with AI</h1>
        <p>This application allows you to create a page from a template using AI. It replaces prompts in the resource with the response from the AI, and also provides the option to reset the resource back to its original prompts. You can provide an additional prompt and a URL for the AI to use as context.</p>
        <form id="templatingForm">
            <div class="form-group">
                <label for="resourcePath">Resource Path:</label>
                <input type="text" class="form-control" id="resourcePath" name="resourcePath" required>
                <small class="form-text text-muted">Enter the path of the resource to be processed.</small>
            </div>
            <div class="form-group">
                <label for="additionalPrompt">Additional Prompt:</label>
                <textarea class="form-control" id="additionalPrompt" name="additionalPrompt" rows="3"></textarea>
                <small class="form-text text-muted">Provide an additional prompt for the AI to use.</small>
            </div>
            <div class="form-group">
                <label for="additionalUrls">Additional URL:</label>
                <input type="url" class="form-control" id="additionalUrls" name="additionalUrls">
                <small class="form-text text-muted">Enter a URL for the AI to use as context.</small>
            </div>
            <button type="submit" class="btn btn-primary" id="replacePromptsBtn">Replace Prompts</button>
            <button type="submit" class="btn btn-primary" id="resetPromptsBtn">Reset to Prompts</button>
        </form>
        <div id="resultDiv" class="mt-4"></div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            var formData = JSON.parse(localStorage.getItem('composum-ai-prototype-templating')) || {};
            $('#resourcePath').val(formData.resourcePath || '');
            $('#additionalPrompt').val(formData.additionalPrompt || '');
            $('#additionalUrls').val(formData.additionalUrls || '');

            $('#templatingForm').submit(function(event) {
                event.preventDefault();
                var method = event.originalEvent.submitter.id === 'replacePromptsBtn' ? 'replacePromptsInResource' : 'resetToPrompts';
                var formData = {
                    resourcePath: $('#resourcePath').val(),
                    additionalPrompt: $('#additionalPrompt').val(),
                    additionalUrls: $('#additionalUrls').val()
                };
                localStorage.setItem('composum-ai-prototype-templating', JSON.stringify(formData));

                $('#replacePromptsBtn, #resetPromptsBtn').prop('disabled', true);
                $.post('/bin/cpm/ai/experimental/templating.' + method + '.json', formData)
                    .done(function(data) {
                        $('#resultDiv').html('<pre>' + JSON.stringify(data, null, 2) + '</pre>');
                    })
                    .fail(function(jqXHR, textStatus, errorThrown) {
                        $('#resultDiv').html('<pre>Error: ' + errorThrown + '</pre>');
                    })
                    .always(function() {
                        $('#replacePromptsBtn, #resetPromptsBtn').prop('disabled', false);
                    });
            });
        });
    </script>
</body>
</html>

<!-- AIGenVersion(2c5b9c6c, templating.html-31d01785, AITemplatingService.java-743252e4, AITemplatingServlet.java-242fa43c) -->
